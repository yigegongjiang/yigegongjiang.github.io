<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.1.1">
<link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="manifest" href="/images/site.webmanifest">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha256-wiz7ZSCn/btzhjKDQBms9Hx4sSeUYsDrTLg7roPstac=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.33/fancybox/fancybox.css" integrity="sha256-gkQVf8UKZgQ0HyuxL/VnacadJ+D2Kox2TCEBuNQg5+w=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"www.yigegongjiang.com","root":"/","images":"/images","scheme":"Pisces","darkmode":true,"version":"8.19.2","exturl":true,"sidebar":{"position":"left","width":140,"display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":{"gitalk":{"text":"Light Mode (Better for light mode to discuss, base github, cannot commen can email me)","order":-2},"utterances":{"text":"Dark Mode","order":-1}},"activeClass":"gitalk"},"stickytabs":false,"motion":{"enable":false,"async":true,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="一直有一个写字痛点，就是错别字。尤其在发帖子和写文章这样的正式场合，错别字会引起很大的误解，而每次检查都会很吃力。试用了人气较高的 “写作猫” 和 “火龙果” 两个纠错平台，都有很大的局限性，并不适合我这样的人使用。  写作猫的缺点是 word 走天下，一点也不 nice。火龙果的缺点是没有纠错能力，我用测试文档只检测出来两个不存在的英文错误。它们都不支持 markdown 检测。付费较高，对于非">
<meta property="og:type" content="article">
<meta property="og:title" content="【Swift】中文词语纠错">
<meta property="og:url" content="https://www.yigegongjiang.com/2024/SwiftZhTextCorrect/index.html">
<meta property="og:site_name" content="一个工匠">
<meta property="og:description" content="一直有一个写字痛点，就是错别字。尤其在发帖子和写文章这样的正式场合，错别字会引起很大的误解，而每次检查都会很吃力。试用了人气较高的 “写作猫” 和 “火龙果” 两个纠错平台，都有很大的局限性，并不适合我这样的人使用。  写作猫的缺点是 word 走天下，一点也不 nice。火龙果的缺点是没有纠错能力，我用测试文档只检测出来两个不存在的英文错误。它们都不支持 markdown 检测。付费较高，对于非">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yigegongjiang/image_space@main/blog_img/202401061607920.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yigegongjiang/image_space@main/blog_img/202401061607769.png">
<meta property="article:published_time" content="2024-01-05T20:22:22.000Z">
<meta property="article:author" content="海驴">
<meta property="article:tag" content="Swift">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/yigegongjiang/image_space@main/blog_img/202401061607920.png">


<link rel="canonical" href="https://www.yigegongjiang.com/2024/SwiftZhTextCorrect/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://www.yigegongjiang.com/2024/SwiftZhTextCorrect/","path":"2024/SwiftZhTextCorrect/","title":"【Swift】中文词语纠错"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>【Swift】中文词语纠错 | 一个工匠</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-8CTEWJ02QX"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-8CTEWJ02QX","only_pageview":false,"measure_protocol_api_secret":null}</script>
  <script src="/js/third-party/analytics/google-analytics.js"></script>








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="一个工匠" type="application/atom+xml">
<link rel="alternate" href="/rss2.xml" title="一个工匠" type="application/rss+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">一个工匠</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section">Home</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section">Tags<span class="badge">13</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section">Categories<span class="badge">7</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section">Archives<span class="badge">85</span></a></li><li class="menu-item menu-item-日本指北"><a href="/japan/" rel="section">日本指北</a></li><li class="menu-item menu-item-时间舟"><a href="/categories/%E6%97%B6%E9%97%B4%E8%88%9F/" rel="section">时间舟</a></li><li class="menu-item menu-item-source"><a href="/openSource" rel="section">Source</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section">About</a></li><li class="menu-item menu-item-rss"><a href="/atom.xml" rel="section">RSS</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Demo-%E6%BC%94%E7%A4%BA"><span class="nav-number">1.</span> <span class="nav-text">Demo 演示</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E6%9C%AC%E6%96%87%E4%BB%B6%E8%AF%86%E5%88%AB"><span class="nav-number">2.</span> <span class="nav-text">文本文件识别</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E6%9C%AC%E5%88%86%E5%8F%A5"><span class="nav-number">3.</span> <span class="nav-text">文本分句</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E6%9C%AC%E7%BA%A0%E9%94%99"><span class="nav-number">4.</span> <span class="nav-text">文本纠错</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#python-%E7%8E%AF%E5%A2%83%E6%95%B0%E6%8D%AE%E4%BA%92%E9%80%9A"><span class="nav-number">5.</span> <span class="nav-text">python 环境数据互通</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CLI-%E5%92%8C-SwiftUI"><span class="nav-number">6.</span> <span class="nav-text">CLI 和 SwiftUI</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#brew"><span class="nav-number">7.</span> <span class="nav-text">brew</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="海驴"
      src="https://cdn.jsdelivr.net/gh/yigegongjiang/image_space@main/blog_img/202309220309178.webp">
  <p class="site-author-name" itemprop="name">海驴</p>
  <div class="site-description" itemprop="description">时间，真的不多了。</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">85</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
    <div class="sidebar-inner sidebar-blogroll">
      <div class="links-of-blogroll animated">
        <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
          Links
        </div>
        <ul class="links-of-blogroll-list">
            <li class="links-of-blogroll-item">
              <span class="exturl" data-url="aHR0cHM6Ly90d2l0dGVyLmNvbS9oYWlfbHZf" title="https:&#x2F;&#x2F;twitter.com&#x2F;hai_lv_">X(Twitter)</span>
            </li>
        </ul>
      </div>
    </div>
        <div class="pjax">
        </div>
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://www.yigegongjiang.com/2024/SwiftZhTextCorrect/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://cdn.jsdelivr.net/gh/yigegongjiang/image_space@main/blog_img/202309220309178.webp">
      <meta itemprop="name" content="海驴">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个工匠">
      <meta itemprop="description" content="时间，真的不多了。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="【Swift】中文词语纠错 | 一个工匠">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          【Swift】中文词语纠错
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-01-06 04:22:22" itemprop="dateCreated datePublished" datetime="2024-01-06T04:22:22+08:00">2024-01-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">技术</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p>一直有一个写字痛点，就是错别字。尤其在发帖子和写文章这样的正式场合，错别字会引起很大的误解，而每次检查都会很吃力。<br>试用了人气较高的 “写作猫” 和 “火龙果” 两个纠错平台，都有很大的局限性，并不适合我这样的人使用。</p>
<blockquote>
<p>写作猫的缺点是 word 走天下，一点也不 nice。<br>火龙果的缺点是没有纠错能力，我用测试文档只检测出来两个不存在的英文错误。<br>它们都不支持 markdown 检测。<br>付费较高，对于非高频使用人员不友好。</p>
</blockquote>
<p>于是，尝试自己写一个纠错工具，目前做了开源，支持 CLI 和 GUI，详见：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3lpZ2Vnb25namlhbmcvSExWU2VudGVuY2U=">HLVSentence</span>、<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3lpZ2Vnb25namlhbmcvSExWWmhDb3JyZWN0">HLVZhCorrect</span>。<br>技术方案是：<strong>检测文本文件</strong> -&gt; <strong>文本分句</strong> -&gt; <strong>词语检测</strong> -&gt; <strong>工具集成</strong>。<br>遇到的核心问题有：</p>
<ul>
<li>准确识别文本文件。文本文件无 Magic Number 二进制特征，如何准确识别当前文件为文本文件并读取内容。</li>
<li>文本分句校准。对于纯中文场景，通过常用的标点符号即可正则分句。但一般会参杂英文、特殊符号，还有 markdown。</li>
<li>中文纠错检测和校准。找了不少方案，最后选择 <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3NoaWJpbmc2MjQvcHljb3JyZWN0b3I=">pycorrector</span> 提供的中文纠错模型。工具需要和 python 环境做对接，并对待检测文本做进一步校准以满足模型。</li>
<li>非终端环境和 python 脚本互联。需要支持 python 虚拟安装环境。</li>
<li>SwiftUI 开发 “命令行 CLI 工具” 和 “Mac 菜单栏工具”，将工具对接 brew 平台。</li>
</ul>
<p>下面是开发文本纠错工具的一些历程。</p>
<span id="more"></span>

<h2 id="Demo-演示"><a href="#Demo-演示" class="headerlink" title="Demo 演示"></a>Demo 演示</h2><p>可查阅 <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3lpZ2Vnb25namlhbmcvSExWU2VudGVuY2U=">HLVSentence</span>、<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3lpZ2Vnb25namlhbmcvSExWWmhDb3JyZWN0">HLVZhCorrect</span> 两个项目的 readme 主页，查看 CLI 和 GUI 的效果和使用说明。</p>
<img data-src="https://cdn.jsdelivr.net/gh/yigegongjiang/image_space@main/blog_img/202401061607920.png" width="40%">
<img data-src="https://cdn.jsdelivr.net/gh/yigegongjiang/image_space@main/blog_img/202401061607769.png" width="40%">

<h2 id="文本文件识别"><a href="#文本文件识别" class="headerlink" title="文本文件识别"></a>文本文件识别</h2><p>对于具有特定使用场景的二进制文件，它们不需要遵循 Unicode 字符集规范。因为使用场景专一，一般都会通过 <code>Magic Number</code> 对文件类型进行标识，如 ELF、Zip 等。<br>但对于一个文件是否是<code>文本文件</code>，并没有完全行之有效的识别方案。只能通过尝试去理解内容，这是有一定误差的。<br>对于<code>文本文件</code>所具有的识别属性，可以从以下几点考虑：</p>
<ul>
<li>文件后缀。【特定场景下稳定，对用户信任】</li>
<li>magic number 排除。【文本文件均无稳定的 magic number】</li>
<li>编码识别。【文本文件一定有一致的编码和解码方案】</li>
</ul>
<p>通过文本编码可以最为精确的识别当前文件是否是文本文件，从而进一步依靠对应的编码来读取文本内容。但这也会有一些问题：</p>
<ol>
<li>性能问题。文本文件一般较小，可以进行全量解码。但待解码的文件可能是图片或者压缩包，这会有极大的性能损耗。</li>
<li>二进制中存在文本标记。二进制文件中部分位置可能插入文本，用于记录一些信息。如果读取部分内容且正好读取了这一部分，则有一定的误判概率。</li>
</ol>
<p>所以，有一个可行的方案：</p>
<ol>
<li>先判断有没有 magic number。如果有，则可以识别到当前文件的具体类型。<code>一般只要有 maigc，就不再是文本文件了</code>。</li>
<li>再对文件内容进行多个位置的截取解码。根据文件大小<code>动态设置采样点</code>，且所有采样点<code>解码全部通过</code>，则判定为文本文件。</li>
</ol>
<p>Swift 文本文件识别 源码详见：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3lpZ2Vnb25namlhbmcvSExWRmlsZUR1bXA=">HLVFileDump</span><br>对于文本编码的详细介绍可查阅 <a href="https://www.yigegongjiang.com/2023/unicode/">计算机字符编码与内存编码</a></p>
<h2 id="文本分句"><a href="#文本分句" class="headerlink" title="文本分句"></a>文本分句</h2><p>纯中文环境下的分句，比较好实现。只需要控制将<code>？</code>、<code>；</code>等几个特别的断句符号进行识别即可。<br>但很少有纯中文的段落，一般都是中英文混杂，而且还有个数算术符号。如下面几个例子：</p>
<ol>
<li><code>今天的温度是 25.3°C，天空晴朗，风速约 10 mph.</code>，这里末尾是英文的<code>.</code> 收尾，且数字中含有<code>.</code> 无法做断句。这里只能通过 NLP 语言模型进行分句，Apple 提供了 <code>NaturalLanguage</code> 物料库，可以在多语言混合的场景下，进行语句分割，且能够处理数字符号。</li>
<li><code>今天天气不错（适合出游），你要参加吗？</code>，这里 NLP 就不能很好识别，会把中文的<code>（</code>进行分句，导致 <code>（）</code> 两个字符被分割到两个分句里面。</li>
<li><code>1. 吃饭 2. 睡觉 3. 打豆豆</code>，这样有数字前缀或者其他特殊字符前后缀的，在分句后理应去除序号或者特殊描述符号，只保留汉字内容。这个 NLP 能初步识别，但也有误差，基本够用。</li>
<li>特殊标记符号如 <code>\t</code> 等，需要特别处理。它们会影响到分句的质量。</li>
</ol>
<p>这里的一个可行方案是：</p>
<ol>
<li>先根据中文符号进行一次分句。此时结果基本符合中文语意，但中英文和符号混杂的地方无法分割。</li>
<li>将上一步的分句结果使用 NLP 二次分句，此时基本符合分句诉求，偏差不大。</li>
</ol>
<p>但是在可行方案执行前，还有一个重要的点，是 <strong>NLP 对 markdown 识别不敏感，误差率较高</strong>。还需要先进行 markdown 的去格式化。</p>
<h2 id="文本纠错"><a href="#文本纠错" class="headerlink" title="文本纠错"></a>文本纠错</h2><p>找了很多文本纠错开源方案，大多不理想。甚至文章开头说到的商业平台，测试下来也没有很优秀。<br>一个很主要的点，是纠错是针对单词而非语境的。针对单词的纠错通过大量的单词匹配即可，但误差率较高。<br>最后使用的是 python3 实现的 <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3NoaWJpbmc2MjQvcHljb3JyZWN0b3I=">pycorrector</span> 模型，能够部分识别语境。</p>
<p>对模型参数进行一些调整处理后，目前能够做到：</p>
<ol>
<li>如果有错，非常大的概率是能够被检测到。</li>
<li>如果没错，有小部分概率认为有错。</li>
</ol>
<p>就像布隆过滤器一样，没有漏，也是可以的。又不是不能用。</p>
<p>当然，模型对数据更严格，稍有不慎，就检测失败了。最大的问题是不支持英文和特殊符号。<br>所有在文本纠错的时候，又对上面的分句内容进行中文提取，然后交由 pycorrector 检测。</p>
<h2 id="python-环境数据互通"><a href="#python-环境数据互通" class="headerlink" title="python 环境数据互通"></a>python 环境数据互通</h2><p>前面分句的结果在 Swift 可执行程序的内存里，后面需要交用 python 脚本执行并拿到处理结果。<br>一个可行的办法是 app 中嵌入 python 解释器，但这会凭空增加复杂度，且不好维护 pycorrector 模型库。</p>
<p>最后通过 <a href="https://www.yigegongjiang.com/2023/SwiftSystemShell/">SwiftShell 高效的命令行工具</a> 实现了数据互通。<br>因为 app 环境中缺失终端环境变量，这在使用 Conda python 虚拟环境的时候会找不到 python 可执行三方库。<br>最后的解决方案是委屈用户，需要自行通过 <code>echo $PATH</code> 获取终端 path 后设置到 app 中。</p>
<p>对于 CLI 环境倒比较友好，因为 CLI 本来就是在终端中运行的，已经拥有了终端上下文 Env，没有遇到太多的问题。</p>
<h2 id="CLI-和-SwiftUI"><a href="#CLI-和-SwiftUI" class="headerlink" title="CLI 和 SwiftUI"></a>CLI 和 SwiftUI</h2><p>Swift 开发 CLI 命令行，整体还是比较快速简便的，官方有较好的支持。<br>入门可以参考：<a href="https://www.yigegongjiang.com/2023/SwiftCommandEnv/">Swift 脚本开发环境搭建</a>，当前项目也是完全按照入门说明来操作的。尤其文中的 <code>不换行更新上一次的输出结果</code> 和 <code>异步等待</code>，在命令行开发过程中很有用。</p>
<p>SwiftUI 开发 Mac 还是有不少概念需要理清。<br>AppKit 和 UIKit 有很大的差异，比如 Window/WindowController/NSMenu/NSStatus 等。SwiftUI 又要抹平两者的差异，所以 SwiftUI 整体上和 AppKit/UIKit 都有较大差异。<br>建议一个入门方式，是通过 Xcode 的 <code>Development Documentation</code> 快速查看 SwiftUI 的编写规则，混个脸熟。<br>然后在 Github 上面搜索 Api 找到一些比较新的 SwiftUI 项目阅读源码。<br>最后，频繁的咨询 ChatGPT，有时候它给的答案并不对，但能给一个大致的方向。</p>
<h2 id="brew"><a href="#brew" class="headerlink" title="brew"></a>brew</h2><p>可参考当前工程的私有配置：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3lpZ2Vnb25namlhbmcvaG9tZWJyZXctdGFw">homebrew-tap</span>。<br>brew 自定义仓库等相关资料较少，本人也没有进一步学习。<br>目前把 CLI 和 GUI 都部署到了自定义仓库中，有需要的可以简单参考下。</p>
<hr>
<p>App Store 真的做到了 “花开两朵，各表一支”。<br>在 Mac 上，Mac App Store (MAS) 犹如鸡肋，复杂的沙盒安全形同虚设。<br>Apple 看着 MAS 生意惨淡，却毫无作为。既不能做为平台为优秀的软件做宣传，也阻止不了垃圾软件的恶意收费。</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="followme">
  <span>Follow me by other channels</span>

  <div class="social-list">

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://twitter.com/hai_lv_">
            <span class="icon">
              <i class="fab fa-twitter"></i>
            </span>

            <span class="label">Twitter</span>
          </a>
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://t.me/hai_lv_tg">
            <span class="icon">
              <i class="fab fa-telegram"></i>
            </span>

            <span class="label">Telegram</span>
          </a>
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="mailto:one.gongjiang@gmail.com">
            <span class="icon">
              <i class="fa fa-envelope"></i>
            </span>

            <span class="label">Email</span>
          </a>
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="/atom.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>

            <span class="label">RSS</span>
          </a>
      </div>
  </div>
</div>

          <div class="post-tags">
              <a href="/tags/Swift/" rel="tag"># Swift</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2023/unicode/" rel="prev" title="计算机字符编码与内存编码 - Unicode、UTF8、String">
                  <i class="fa fa-angle-left"></i> 计算机字符编码与内存编码 - Unicode、UTF8、String
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2024/my2023/" rel="next" title="我的 2023">
                  我的 2023 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






      <div class="tabs tabs-comment">
        <ul class="nav-tabs">
            <li class="tab"><a href="#comment-gitalk">Light Mode (Better for light mode to discuss, base github, cannot commen can email me)</a></li>
            <li class="tab"><a href="#comment-utterances">Dark Mode</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane gitalk" id="comment-gitalk">
              <div class="comments gitalk-container"></div>
            </div>
            <div class="tab-pane utterances" id="comment-utterances">
              <div class="comments utterances-container"></div>
            </div>
        </div>
      </div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2018 – 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class=""></i>
    </span>
    <span class="author" itemprop="copyrightHolder">one.gongjiang艾特gmail.com 所有文章均为原创。我不介意任意形式的转载，但最好不要修改内容。因转载或者修改内容导致的任何问题，我均不负责。如果你真的担心版权，可邮联。评价需要外网，这是枷锁，也是照妖镜。</span>
  </div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.33/fancybox/fancybox.umd.js" integrity="sha256-+2+qOqR8CKoHh/AsVR9k2qaDBKWjYNC2nozhYmv5j9k=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script>

  



  <script src="/js/third-party/fancybox.js"></script>



  




  <script src="https://cdnjs.cloudflare.com/ajax/libs/quicklink/2.3.0/quicklink.umd.js" integrity="sha256-yvJQOINiH9fWemHn0vCA5lsHWJaHs6/ZmO+1Ft04SvM=" crossorigin="anonymous"></script>
  <script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":true,"archive":true,"delay":true,"timeout":3000,"priority":true,"url":"https://www.yigegongjiang.com/2024/SwiftZhTextCorrect/"}</script>
  <script src="/js/third-party/quicklink.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"yigegongjiang","repo":"yigegongjiang_discuss","client_id":"65bebc0a049450012bda","client_secret":"06004e7143dc59f263a8d1bd1893dcf66d6bb7ee","admin_user":"yigegongjiang","distraction_free_mode":false,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":"en","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.min.js","integrity":"sha256-MVK9MGD/XJaGyIghSVrONSnoXoGh3IFxLw0zfvzpxR4="},"path_md5":"b5e12ca5d58c87fa80433be9d1642f86"}</script>
<script src="/js/third-party/comments/gitalk.js"></script>
<script class="next-config" data-name="utterances" type="application/json">{"enable":true,"repo":"yigegongjiang/yigegongjiang_discuss","issue_term":"title","theme":"photon-dark"}</script>
<script src="/js/third-party/comments/utterances.js"></script>

</body>
</html>
