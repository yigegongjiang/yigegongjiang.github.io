<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.3.0">
<link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="manifest" href="/images/site.webmanifest">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha256-wiz7ZSCn/btzhjKDQBms9Hx4sSeUYsDrTLg7roPstac=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.33/fancybox/fancybox.css" integrity="sha256-gkQVf8UKZgQ0HyuxL/VnacadJ+D2Kox2TCEBuNQg5+w=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"www.yigegongjiang.com","root":"/","images":"/images","scheme":"Pisces","darkmode":true,"version":"8.19.2","exturl":true,"sidebar":{"position":"left","width":140,"display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":{"gitalk":{"text":"Light Mode (Better for light mode to discuss, base github, cannot commen can email me)","order":-2},"utterances":{"text":"Dark Mode","order":-1}},"activeClass":"gitalk"},"stickytabs":false,"motion":{"enable":false,"async":true,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="赵长鹏先生在美国认罪后，虚拟货币的江湖地位就算是稳定了。虚拟货币一直游离在法律的边缘，中国早就封杀了。而今最大的交易平台老板因 “大量非法货币流通” 在美国认罪，让很多人觉得未来迷茫。我倒是觉得不用担心了。这个圈子乱到没有点资产都不敢进去，但后面可能会越发趋于平稳。因为至少在美国看来，“币安” 已经合法了，可以被美联储约束了。而不久的将来，中国一定会开放，中国从不会放过割韭菜的好工具。 两个月前，">
<meta property="og:type" content="article">
<meta property="og:title" content="币圈 - 虚拟货币">
<meta property="og:url" content="https://www.yigegongjiang.com/2024/virtual_currency/index.html">
<meta property="og:site_name" content="一个工匠">
<meta property="og:description" content="赵长鹏先生在美国认罪后，虚拟货币的江湖地位就算是稳定了。虚拟货币一直游离在法律的边缘，中国早就封杀了。而今最大的交易平台老板因 “大量非法货币流通” 在美国认罪，让很多人觉得未来迷茫。我倒是觉得不用担心了。这个圈子乱到没有点资产都不敢进去，但后面可能会越发趋于平稳。因为至少在美国看来，“币安” 已经合法了，可以被美联储约束了。而不久的将来，中国一定会开放，中国从不会放过割韭菜的好工具。 两个月前，">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2024-07-09T16:24:00.000Z">
<meta property="article:author" content="海驴">
<meta property="article:tag" content="Life">
<meta property="article:tag" content="计算机基础">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://www.yigegongjiang.com/2024/virtual_currency/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://www.yigegongjiang.com/2024/virtual_currency/","path":"2024/virtual_currency/","title":"币圈 - 虚拟货币"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>币圈 - 虚拟货币 | 一个工匠</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-8CTEWJ02QX"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-8CTEWJ02QX","only_pageview":false,"measure_protocol_api_secret":null}</script>
  <script src="/js/third-party/analytics/google-analytics.js"></script>








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="一个工匠" type="application/atom+xml">
<link rel="alternate" href="/rss2.xml" title="一个工匠" type="application/rss+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">一个工匠</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section">Home</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section">Tags<span class="badge">13</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section">Categories<span class="badge">7</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section">Archives<span class="badge">99</span></a></li><li class="menu-item menu-item-日本指北"><a href="/japan/" rel="section">日本指北</a></li><li class="menu-item menu-item-时间舟"><a href="/categories/%E6%97%B6%E9%97%B4%E8%88%9F/" rel="section">时间舟</a></li><li class="menu-item menu-item-source"><a href="/openSource" rel="section">Source</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section">About</a></li><li class="menu-item menu-item-rss"><a href="/atom.xml" rel="section">RSS</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8C%BA%E5%9D%97%E9%93%BE"><span class="nav-number">1.</span> <span class="nav-text">区块链</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%AF%94%E7%89%B9%E5%B8%81"><span class="nav-number">2.</span> <span class="nav-text">比特币</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8C%BA%E5%9D%97"><span class="nav-number">2.1.</span> <span class="nav-text">区块</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%A4%E6%98%93"><span class="nav-number">2.2.</span> <span class="nav-text">交易</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%AF%94%E7%89%B9%E5%B8%81%E5%9C%B0%E5%9D%80"><span class="nav-number">2.3.</span> <span class="nav-text">比特币地址</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%A4%E6%98%93%E6%B1%A0"><span class="nav-number">2.4.</span> <span class="nav-text">交易池</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%A4%E6%98%93%E6%B5%81%E7%A8%8B"><span class="nav-number">2.5.</span> <span class="nav-text">交易流程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%AF%94%E7%89%B9%E5%B8%81%E9%93%BE%E5%AD%98%E5%82%A8%E7%A9%BA%E9%97%B4"><span class="nav-number">2.6.</span> <span class="nav-text">比特币链存储空间</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%A8%E8%8A%82%E7%82%B9"><span class="nav-number">2.7.</span> <span class="nav-text">全节点</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BB%A5%E5%A4%AA%E5%9D%8A"><span class="nav-number">3.</span> <span class="nav-text">以太坊</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A6%82%E5%BF%B5"><span class="nav-number">3.1.</span> <span class="nav-text">概念</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%A5%E5%A4%AA%E5%9D%8A%E5%8C%BA%E5%9D%97%E9%93%BE"><span class="nav-number">3.2.</span> <span class="nav-text">以太坊区块链</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E7%8A%B6%E6%80%81"><span class="nav-number">3.2.1.</span> <span class="nav-text">全局状态</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6"><span class="nav-number">3.3.</span> <span class="nav-text">智能合约</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%A3%E5%B8%81"><span class="nav-number">3.4.</span> <span class="nav-text">代币</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ERC-20%EF%BC%88%E9%80%9A%E7%94%A8%E4%BB%A3%E5%B8%81%E6%A0%87%E5%87%86%EF%BC%89"><span class="nav-number">3.4.1.</span> <span class="nav-text">ERC-20（通用代币标准）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ERC-721%EF%BC%88%E9%9D%9E%E5%90%8C%E8%B4%A8%E5%8C%96%E4%BB%A3%E5%B8%81%E6%A0%87%E5%87%86%EF%BC%89"><span class="nav-number">3.4.2.</span> <span class="nav-text">ERC-721（非同质化代币标准）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DAO-%E7%BB%84%E7%BB%87%E8%87%AA%E6%B2%BB"><span class="nav-number">3.5.</span> <span class="nav-text">DAO - 组织自治</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%92%8C-HTTPS-%E5%81%9A%E5%AF%B9%E6%AF%94"><span class="nav-number">4.</span> <span class="nav-text">和 HTTPS 做对比</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="海驴"
      src="https://cdn.jsdelivr.net/gh/yigegongjiang/image_space@main/blog_img/202309220309178.webp">
  <p class="site-author-name" itemprop="name">海驴</p>
  <div class="site-description" itemprop="description">时间，真的不多了。</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">99</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
    <div class="sidebar-inner sidebar-blogroll">
      <div class="links-of-blogroll animated">
        <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
          Links
        </div>
        <ul class="links-of-blogroll-list">
            <li class="links-of-blogroll-item">
              <span class="exturl" data-url="aHR0cHM6Ly90d2l0dGVyLmNvbS9oYWlfbHZf" title="https:&#x2F;&#x2F;twitter.com&#x2F;hai_lv_">X(Twitter)</span>
            </li>
        </ul>
      </div>
    </div>
        <div class="pjax">
        </div>
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://www.yigegongjiang.com/2024/virtual_currency/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://cdn.jsdelivr.net/gh/yigegongjiang/image_space@main/blog_img/202309220309178.webp">
      <meta itemprop="name" content="海驴">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个工匠">
      <meta itemprop="description" content="时间，真的不多了。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="币圈 - 虚拟货币 | 一个工匠">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          币圈 - 虚拟货币
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-07-10 00:24:00" itemprop="dateCreated datePublished" datetime="2024-07-10T00:24:00+08:00">2024-07-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">技术</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p>赵长鹏先生在美国认罪后，虚拟货币的江湖地位就算是稳定了。<br>虚拟货币一直游离在法律的边缘，中国早就封杀了。而今最大的交易平台老板因 “大量非法货币流通” 在美国认罪，让很多人觉得未来迷茫。<br>我倒是觉得不用担心了。这个圈子乱到没有点资产都不敢进去，但后面可能会越发趋于平稳。<br>因为至少在美国看来，“币安” 已经合法了，可以被美联储约束了。而不久的将来，中国一定会开放，中国从不会放过割韭菜的好工具。</p>
<p>两个月前，在国内的网约车上，司机小哥问我懂不懂虚拟货币。我说我不太懂，但理解起来应该比较快，希望他多讲讲。<br>他说他也不懂，就是前两天拉了一个客人。那位客人很客气，在车里长时间打电话，内容是盗了很多币，在和同伙计划跑路的细节。<br>小哥说，那位客人很随和，但是在电话里，他一直在嘲笑被盗的人一早起来发现巨额货币丢失后的绝望。<br>小哥说他不懂，看我戴眼镜，想问问我懂不懂，问我警察会不会去抓捕。<br>我说也不懂。只听说在币圈玩的，都挺野的。</p>
<span id="more"></span>

<p>比特币刚出来的时候，我刚参加工作，那时候听到了挖矿。等再听到巨大消息的时候，比特币已经 2w 美元了，现在已经 6w 了。<br>后面只听说不能玩，风险大，也就避而远之。<br>最近实在是有些穷疯了，就想看看币圈到底是什么，哪来的那么多种虚拟币，都还能兑换美金。<br>能兑换美金又不是法定货币，没有法律保护又能交易和购买实物。<br>还有很很多多那些 “币安、以太坊、区块链、去中心、web3” 等等名词，我想去弄明白到底咋回事。</p>
<p>下面内容就比较散乱了，主要是资料查询过程中的一些备忘。还是先说几个结论吧，tldr。</p>
<ol>
<li>整个技术层面，没感觉到特色。</li>
<li>一切的基石 “区块链” 是单向链表，最简单的数据结构。里面的各种加密，也都是已经成熟的加密方案。</li>
<li>“去中心化”，就是非常成熟的 p2p。</li>
<li>在基石之上搭建起来的 “智能合约”，就是 faas 服务。</li>
<li>从技术层面看，太弱了。所有参与币圈的，都是在豪赌，赌一个新瓶装旧酒能不能讲更多的故事。</li>
<li>所有的上层建设如币安、NFT 等，都基于最基础的 “区块链”，即相信它的 “不可篡改”。</li>
<li>然后加了两大护法，分别是基于 “p2p” 的 “去中心化” 和基于 “faas” 的 “智能合约”。这两个护法，是用来增加信心的。</li>
<li>一切的一切，都在于 <strong>信任</strong> 并 <strong>遵守</strong> “区块链” 链表中保存的数据。这里的信任，是实打实的，就像白纸黑纸一样。但是<strong>遵守</strong>，一直都是空头支票。</li>
<li>因为 <strong>遵守</strong> 的空缺，整个币圈都是在豪赌，赌一个一落千丈的时间点，或者产业被法律认可。</li>
<li>转机是赵长鹏先生和币安，向美国认罪。<strong>遵守</strong> 已经有政府背书了（但 “去中心化” 的安全性就名存实亡了）。已经成型的产业大概率不会没落，这里将变成投资机构。但 DAO、web3 是走不下去的。</li>
<li>建议 USDT，和美元 1:1，可以让资产不贬值。说千道万，就是信不信得过。基于 10，我觉得以后可以简单的信一点。</li>
<li>整个产业，都在等待法律背书。可现实世界本就有法律、律师、法院了。这是一个矛盾的产业。</li>
</ol>
<h1 id="区块链"><a href="#区块链" class="headerlink" title="区块链"></a>区块链</h1><p>区块链是一种数据结构和算法集合。通过这套结构，可以保障以下特性：</p>
<ol>
<li>不可篡改</li>
<li>高度安全</li>
<li>透明</li>
</ol>
<p>区块链就是链表，通过加签增加了修改的复杂度。区块链就是让人相信：你看到的数据一定是真实的。</p>
<p>因为以上特性，可以基于区块链，做一些事情。只要产品的形态能够使用区块链的数据结构和算法来表达，就可以使用区块链技术。</p>
<p>比如，药品跟踪：有问题的药品有可能无法溯源。如果基于区块链系统，就可以做到无法篡改、透明。每一支药，从研发、出厂、销售、使用都可以被记录。</p>
<p>区块链中，对于每一个区块的产生，有一个方案是使用 PoW（工作量证明）。<br>这个方案需要使用巨大的算力才能够输出一个有效的区块，从而可以保障不可篡改。<br>投入到 PoW 矿业的大量计算资源和电力，如果用于科学研究、数据分析、医疗研究等其他领域，可能会带来更直接的人类福祉增益。<br>but，目前需要把这些巨大的资源用来计算一个区块。这个投入和产出的资源配比，的确很不好理解，也只能玩币的人能够下狠心。</p>
<h1 id="比特币"><a href="#比特币" class="headerlink" title="比特币"></a>比特币</h1><p>比特币没有其他应用如 NFT 玩的花，比特币是完全遵守 区块链 的技术规则来实现的。</p>
<p>通过 <span class="exturl" data-url="aHR0cHM6Ly9iaXRpbmZvY2hhcnRzLmNvbS9iaXRjb2luLw==">https://bitinfocharts.com/bitcoin/</span> 可以查看当前比特币的一些信息，如区块链总区块数、大小、生成时间等。</p>
<h2 id="区块"><a href="#区块" class="headerlink" title="区块"></a>区块</h2><ol>
<li>每个区块，都有一个 nonce（随机数），这个 nonce 可以保障区块被挖出来的时间在 10 分钟左右。通过定期（两周）可能性的调整 nonce 值来保障。</li>
<li>通过 nonce 计算出一个符合当前区块定义的值，就是说这个区块被挖掘出来了。这就是挖矿。挖矿就是挖每一个区块。</li>
<li>区块中记录 1000 - 2000 笔交易，其中第一行记录，就是当前挖矿的收益交易。</li>
<li>每个区块大约 2-4 M 左右，大约每 10 分钟产生一个区块。</li>
</ol>
<h2 id="交易"><a href="#交易" class="headerlink" title="交易"></a>交易</h2><ol>
<li>交易中包含交易 ID、input、output。input 就是来源账户，可能有多个账户。output 就是流向账户，可能有多个账户。</li>
<li>input 中包含解锁脚本，用来解锁来源账户在上一个记录中的锁定脚本。output 中包含锁定脚本，用来供下一次交易的时候给 input 解锁脚本使用。<ol>
<li>原理：把解锁脚本和锁定脚本合起来，通过比特币脚本运行器执行，能执行成功，则表示当前来源账号是有效的。即 A 用户可以消费 A 用户自己的钱，不能被 B 用户消费。</li>
</ol>
</li>
<li>示例：A 持有 5 个比特币并支付给 B 2 个比特币：<ol>
<li>input：A</li>
<li>output：A (3) + B (2) ⇒ 实际上：A (2.99) + B (1.99)，0.02 是手续费。</li>
</ol>
</li>
<li>对于上面的示例，实际上还有手续费，这些手续费是给矿工的。即矿工挖出来一个区块后，不仅得到了比特币奖励，还拿到了每一个交易的交易费用。</li>
</ol>
<h2 id="比特币地址"><a href="#比特币地址" class="headerlink" title="比特币地址"></a>比特币地址</h2><ol>
<li>私钥生成公钥，公钥生成比特币地址。<ol>
<li>比特币地址是公开的，即别人拿到该地址，就可以往这个地址打币。别人也可以检索区块链中的区块，查到该地址的资金来源和流向。</li>
<li>1 个用户可以持有 n 个比特币地址用于交易，这样可以保护隐私。也代表需要 n 个公私钥。</li>
<li>钱包的作用，就是管理公私钥和比特币地址。</li>
<li>钱包也可以通过 1 个私钥管理 1 个公钥和 n 个比特币地址。这样更方便一些，比较保存 1 个私钥和保存 n 个私钥的复杂度是不一样的。这个技术叫：HD。</li>
<li>将所有的比特币地址的 UTXO (剩余币) 总和计算出来，就是当前用户持有的币总量。</li>
</ol>
</li>
</ol>
<h2 id="交易池"><a href="#交易池" class="headerlink" title="交易池"></a>交易池</h2><p>比特币网络中一个临时存储的区域，用来保存尚未被包括在区块中的有效交易。</p>
<p>A 向 B 支付币，这笔交易，首先进入交易池。其中记录了详细的且验证有效的交易信息以及费用（交易费，交易发起人可以指定奖励矿工多少费用）。</p>
<p>交易池在哪里：存储在 “全节点” 中。详见下面的【比特币链存储空间】。</p>
<h2 id="交易流程"><a href="#交易流程" class="headerlink" title="交易流程"></a>交易流程</h2><p>我 (A) 现在通过钱包向 B 支付了 0.5 比特币：</p>
<figure class="highlight jsx"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">当你通过钱包向另一个用户（B）支付比特币时，整个过程涉及几个关键步骤，从创建交易到最终确认在区块链上的记录。以下是支付<span class="number">0.5</span>比特币的技术流程：</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> 创建交易</span><br><span class="line">- 输入信息：钱包首先检查你的比特币地址中有足够的余额可用来发送<span class="number">0.5</span>比特币给B。这通常涉及到选择足够的输入（之前的交易输出），来覆盖发送金额和可能的交易费用。</span><br><span class="line">- 输出信息：在交易中创建两个输出：</span><br><span class="line">  - 第一个输出是支付给B的<span class="number">0.5</span>比特币。</span><br><span class="line">  - 如果选定的输入超过了<span class="number">0.5</span>比特币加上交易费，第二个输出将是找零金额，返回到你自己的一个地址上。</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> 签名交易</span><br><span class="line">- 你的钱包使用你的私钥对交易进行数字签名。这个签名过程是为了证明你有权使用这些输入，并授权这次交易。</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span> 广播交易</span><br><span class="line">- 签名的交易被发送到比特币网络。钱包软件将交易数据广播给网络中的节点（比如全节点）。这些节点接收到交易后，会进行初步验证，比如检查签名是否有效，输入是否未被其他交易双重支付。</span><br><span class="line"></span><br><span class="line"><span class="number">4.</span> 交易验证与确认</span><br><span class="line">- 一旦交易被网络节点接受，它会被放入交易池中，并等待矿工将其打包入区块。</span><br><span class="line">- 矿工选择交易池中的交易，并尝试创建新的区块。矿工在创建新区块的过程中需要解决一个数学难题，这个过程称为工作量证明（<span class="title class_">Proof</span> <span class="keyword">of</span> <span class="title class_">Work</span>）。</span><br><span class="line">- 当一个矿工成功解决难题并创建了一个新区块，包含你的交易在内的区块被添加到区块链上。这个区块随后被广播给所有的节点。</span><br><span class="line"></span><br><span class="line"><span class="number">5.</span> 确认数增加</span><br><span class="line">- 一旦你的交易被包含在一个区块中，它获得了第一次确认。随着更多区块被添加到这个区块之后，你的交易的确认数会逐渐增加。一般来说，六个确认后，交易被认为是非常安全的。</span><br><span class="line"></span><br><span class="line">这个流程确保了比特币交易的安全性和不可逆性。通过网络分布式的节点和矿工的共同工作，比特币网络维护了其透明度和去中心化的特性。</span><br></pre></td></tr></tbody></table></figure>

<h2 id="比特币链存储空间"><a href="#比特币链存储空间" class="headerlink" title="比特币链存储空间"></a>比特币链存储空间</h2><p>目前 (2024.07.06)，比特币链共计 850,932 个区块，每个区块生成时间 11m 10s，每个区块 800.35 KBytes，整个区块链 491.50 GB，第一个区块生成时间是 2009-01-09。</p>
<p>对于普通用户，不可能存储近 500G 的链在本地。但比特币本身又是去中心化的。原理是：</p>
<p>区块链存储有两种方式：</p>
<ol>
<li>全节点：存储整个区块链数据，并实时新增。</li>
<li>轻节点：只保存区块头部的信息。来验证交易数据的正确性。比如手机钱包。<ol>
<li>钱包是公司、个人、开源组织开发的，钱包虽然在手机、电脑上安装，但还是要访问对应的后台服务器。</li>
<li>后台服务器一般都是全节点存储区块链数据。</li>
</ol>
</li>
</ol>
<h2 id="全节点"><a href="#全节点" class="headerlink" title="全节点"></a>全节点</h2><p>全节点，是软件，可以由大机构和个人或者开源组织发布。</p>
<p>当一个用户安装了全节点之后，就会拉取所有区块链数据并成为同步链中的一部分，包括新增区块、交易池等。</p>
<p>而且，安装了节点软件之后，基于节点发现算法，当前节点会被其他节点感知到。</p>
<p>这样，A 向 B 的交易转账，就会被同步到当前节点的交易池中，并在后期可能会被矿工拉取过去，成为区块计算的一部分。区块只要计算成功，就代表当前 A 向 B 的交易完成了。</p>
<h1 id="以太坊"><a href="#以太坊" class="headerlink" title="以太坊"></a>以太坊</h1><p>认识以太坊之前，需要先理解比特币。因为以太坊有很多和比特币相似的概念。但他们是为了不同的场景。</p>
<h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><ol>
<li>区块链：和比特币的区块链概念相同。因为它们都是基于区块链自身的那些特性发展起来的，如 “不可篡改”。</li>
<li>以太币：是以太坊的核心之一。以太币和比特币在概念层级上等价。</li>
<li>智能合约：是以太坊的另一个核心（总共两个核心基础）。以太坊的区块链上不仅可以记录以太币，还可以记录智能合约。<ol>
<li>区块链中的每一条记录都是交易，交易中可以仅有以太币的交易，还包含一个字段用来存储合约。</li>
<li>非智能合约的交易，该字段为空。</li>
</ol>
</li>
<li>虚拟机 (Ethereum Virtual Machine, EVM)：用来执行智能合约。<ol>
<li>有一套计费标准。即合约的执行是需要消耗以太币的。</li>
</ol>
</li>
<li>全局状态：是区块链的抽象层。</li>
</ol>
<h2 id="以太坊区块链"><a href="#以太坊区块链" class="headerlink" title="以太坊区块链"></a>以太坊区块链</h2><p>和比特币基本相同，有些许差异，如区块挖矿的标准不同、同一时间同样两个区块被挖出来后的处理结果不同（比特币：使用其中一个，以太坊：两个都使用，最多 7 层）。</p>
<p>还有就是，存储的数据不同。比特币主要是存储每一笔交易，其中第一个交易项是当前矿工的比特币奖励。以太坊存储的也差不多，不过里面多了一个字段，叫 “智能合约”，即代码。这个代码可以是通过 class 和 func 的形式定义，可以在后期被以太坊专门设计的 EVM 执行。</p>
<h3 id="全局状态"><a href="#全局状态" class="headerlink" title="全局状态"></a>全局状态</h3><p>比特币中，需要通过全节点，访问每一个区块才能知道某一个比特币地址的消费记录和余额。在以太坊中，查询数据不再需要遍历所有的区块了，因为有一个抽象层，记录了所有以太坊账号的最终结果，就是全局状态。</p>
<p>全局状态可以理解为是一个非常高效的多叉树，它记录了全量的最终数据，通过它，就可以快速获取某个账号的余额和智能合约。</p>
<p>在每个区块被挖出来后，就会更新这个全局状态。</p>
<p>所以，全局状态和区块链一样，是独立存储的。而且，它和区块链一起，被 全节点 持有。它们都是去中心化的。</p>
<p>实际上，全节点还有一个数据，和比特币一样，就是 “交易池”。所有待录入区块的交易，都会先存储与 “交易池” 中，等待被矿工验证和挖矿成功。</p>
<h2 id="智能合约"><a href="#智能合约" class="headerlink" title="智能合约"></a>智能合约</h2><p>智能合约，就是代码。一段通过 class 和 func 组成的图灵完备的 脚本，需要在 EVM 上部署。</p>
<p>它有一个研发生态，可以通过众多后台语言和前端语言进行调用和执行（执行需付费 - 以太币）。</p>
<p>这些代码存储在区块链中，保障不可更改等特性。</p>
<p>举个例子，背景是这样：A 将一个项目给 B 做，约定 B 完成 30%、70%、100% 的时候分别收到 3w、5w、2w 的以太币收款。</p>
<ol>
<li>A 或者 B 或者 第三方，写智能合约 (写代码)，这个合约里面包含一系列的约定函数，如 stageA (…)、stageB (…)、stageC (…)，这些函数中需要包含：验收、打款等细节操作。</li>
<li>创建一条交易，交易中包含 A、B、合约。</li>
<li>部署合约（需要部署在以太坊平台上）。</li>
<li>开发前端页面，比如有三个按钮 stage_a、stage_b、stage_c。每个按钮都执行对应的验收逻辑，并最终调用 合约 接口【stageA (xxx)】。</li>
<li>当 B 完成 30% 后，需要 A 验收并且通过，那么 A 就点击 stage_a 按钮，这个使用 stageA 合约 api 被执行，执行结果是将 A 账户的 3w 以太坊币打到 B 账户。</li>
</ol>
<p>说明：</p>
<p>可以认为这样的合约没有用，比如 B 完成 30% 了，A 也验收通过了，但就是不去点 stage_a 按钮。这样的话，当前合约形同虚设。</p>
<p>但我们不能说这样的合约不存在，因为在区块链上，这是真实记录的，即 A 和 B 之间一定有这个合约。</p>
<p>但现在 A 就是不付款，这没有办法。即 智能合约 能够提供约定的准确性，但没有办法保障约定一定被执行。这是君子法则。</p>
<p>那智能合约和普通的合同相比，就显得操作流程更加复杂但价值也没有提升？</p>
<p>不。</p>
<p>普通的合同有可能丢失或者认为破坏了，但智能合约可以保障：它就在这里，当时什么样，现在也一定什么样。</p>
<p>还是得依靠【君子法则】。</p>
<h2 id="代币"><a href="#代币" class="headerlink" title="代币"></a>代币</h2><p>代币，是完全基于 “智能合约” 建立起来的。通过 faas 平台，来做各种类型的计算，从而实现业务逻辑，如 “币名称、发行币、交易”，就是调用 faas api。</p>
<h3 id="ERC-20（通用代币标准）"><a href="#ERC-20（通用代币标准）" class="headerlink" title="ERC-20（通用代币标准）"></a>ERC-20（通用代币标准）</h3><p><strong>USDT（泰达币）</strong> 是一个使用 ERC-20 标准的代币示例。它是一种稳定币，通常与美元的价值挂钩，这意味着每一个 USDT 通常值 1 美元。USDT 在加密货币交易中非常流行，因为它提供了一种相对稳定的资产存储方式，使交易者可以在不直接兑换成法币的情况下减少价格波动的风险。</p>
<h3 id="ERC-721（非同质化代币标准）"><a href="#ERC-721（非同质化代币标准）" class="headerlink" title="ERC-721（非同质化代币标准）"></a>ERC-721（非同质化代币标准）</h3><p>NFT，常用于数字收藏品和艺术品。</p>
<h2 id="DAO-组织自治"><a href="#DAO-组织自治" class="headerlink" title="DAO-组织自治"></a>DAO - 组织自治</h2><p>也是基于智能合约。想不通，怎么就能往这方面硬挤（DAO 是不可能的）。</p>
<p>假设公司决定开发一个新的产品。你可以在 DAO 中启动一个提案，所有员工都可以投票决定是否启动这个新项目。如果多数人同意，智能合约将自动从公司的资金中划拨预算给这个项目。同样地，项目的进展更新和最终的成果也需要报告给 DAO，以便员工可以继续监督和投票决定后续的资金和资源分配。</p>
<ul>
<li><strong>提高透明度</strong>：由于所有的决策和交易都记录在区块链上，员工可以清楚地看到公司的每一笔支出和每一个决策。</li>
<li><strong>增强员工参与感</strong>：员工直接参与到公司决策中，可以提高他们的归属感和积极性。</li>
<li><strong>减少管理层</strong>：自动执行的智能合约减少了管理层的需要，降低了管理成本。</li>
</ul>
<h1 id="和-HTTPS-做对比"><a href="#和-HTTPS-做对比" class="headerlink" title="和 HTTPS 做对比"></a>和 HTTPS 做对比</h1><p>我们都知道 http 是不安全的，但是我们都相信 https 是安全的。</p>
<p>但 https 其实也不安全，为什么我们还相信它？</p>
<p>为什么不安全：</p>
<ol>
<li>通过中间人 MITM，依旧可以解密本已经加密的数据并明文查看。</li>
<li>有 MITM 的存在，C 和 S 通过 https 传输的数据，依旧会被部分人看到。有两种场景：<ul>
<li>C 主动信任了 中间人 证书，主动查看数据。如开发人员。</li>
<li>C 上当了，信任了黑客的证书。</li>
<li>基于以上两个场景，S 就没有办法信任 https 了，因为 S 给到 C 的数据可以被明文分析了。<ul>
<li>方案一：将数据再次加密，使得中间人拿到加密后的数据。这里只能使用对称加密了，对称密钥也可能被从内存中挖取。本质上只是增加了破解的成本。</li>
<li>方案二：进一步做双向加密认证，使得中间人 MITM 失效。进一步的安全处理上会使用该方案。</li>
</ul>
</li>
</ul>
</li>
<li>所以，对于 https 而言，C 和 S 之间的数据依旧有可能被窃听。如何严格按照安全标准，https 也是不安全的。因为安全本身的定义，就是为了处理窃听风险。</li>
</ol>
<p>为什么我们还是相信 https 协议：</p>
<ol>
<li>我们认为 https 已经能够覆盖大部分安全场景了。</li>
<li>默认对开发人员和上当信任了黑客证书的人，不在关注了。<ul>
<li>开发人员：看就看吧。</li>
<li>上当人员：上当就上当了吧，黑客你就看数据吧，防不了你。</li>
</ul>
</li>
</ol>
<p>https 的安全，是基于 TLS/SSL 实现的。https 是应用层，使用了 TLS/SSL 这套安全套件。</p>
<ol>
<li>https 调用 tls api，tls 完全安全验证后对数据加密，在调用 socket api 将数据给到 tcp 进行传输。</li>
<li>tls 完成安全校验的前提是 tcp 安全通道的建立。</li>
</ol>
<p>区块链 和 https 有很多相似的地方：区块链和 tls 处于同一个层级，而 比特币和以太坊 就如同 https 应用层协议。即 https 使用 tls，以太坊 基于 区块链 技术 。</p>
<ol>
<li>区块链用来保障一个很重要的点：不可伪造。它保障了不可伪造，但上层应用基于这个不可伪造的特性，并不能 100% 的完成上层业务。<ul>
<li>A 通过 区块链 记录了一条向 B 借款 1w 的记录。<ul>
<li>借款到期后，A 就是不还。A 和 B 以及所有人都知道 A 向 B 借了钱，但 A 就是不还。</li>
</ul>
</li>
<li>通过区块链做了一个 NFT 数字画 J 并卖给了用户 M，用户 M 具有 J 的唯一权。但用户 N 依旧将数字画 J 印在广告上做产品宣传。<ul>
<li>用户 N 就是盗版、侵权了，但法律的不完善可能无法制约这种行为。</li>
</ul>
</li>
</ul>
</li>
<li>为什么还相信区块链：<ul>
<li>我们默认相信 https 是安全的。</li>
<li>我们以君子的视角来看待区块链本身。</li>
</ul>
</li>
</ol>
<p>所有的一切，都是以君子视角来看待。</p>
<hr>
<p>币圈一骑红尘，智能合约改变世界，之前得依靠 “君子协议”。显然整个币圈，没有君子。</p>
<p>往后，还是得依靠法律，成为协议的保护神。</p>
<p>那有法律背书后，还要这些干什么呢？现在不就是有法律、律师、法院么。</p>
<p>只能说法律愿意来背书，让这个行业不灭，看看后面能不能有新的价值。</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="followme">
  <span>Follow me by other channels</span>

  <div class="social-list">

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://twitter.com/hai_lv_">
            <span class="icon">
              <i class="fab fa-twitter"></i>
            </span>

            <span class="label">Twitter</span>
          </a>
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://t.me/hai_lv_tg">
            <span class="icon">
              <i class="fab fa-telegram"></i>
            </span>

            <span class="label">Telegram</span>
          </a>
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="mailto:one.gongjiang@gmail.com">
            <span class="icon">
              <i class="fa fa-envelope"></i>
            </span>

            <span class="label">Email</span>
          </a>
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="/atom.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>

            <span class="label">RSS</span>
          </a>
      </div>
  </div>
</div>

          <div class="post-tags">
              <a href="/tags/Life/" rel="tag"># Life</a>
              <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" rel="tag"># 计算机基础</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2024/Fuji/" rel="prev" title="【旅游】富士山">
                  <i class="fa fa-angle-left"></i> 【旅游】富士山
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2024/trump/" rel="next" title="trump - 川普">
                  trump - 川普 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






      <div class="tabs tabs-comment">
        <ul class="nav-tabs">
            <li class="tab"><a href="#comment-gitalk">Light Mode (Better for light mode to discuss, base github, cannot commen can email me)</a></li>
            <li class="tab"><a href="#comment-utterances">Dark Mode</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane gitalk" id="comment-gitalk">
              <div class="comments gitalk-container"></div>
            </div>
            <div class="tab-pane utterances" id="comment-utterances">
              <div class="comments utterances-container"></div>
            </div>
        </div>
      </div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2018 – 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class=""></i>
    </span>
    <span class="author" itemprop="copyrightHolder">one.gongjiang艾特gmail.com 所有文章均为原创。我不介意任意形式的转载，但最好不要修改内容。因转载或者修改内容导致的任何问题，我均不负责。如果你真的担心版权，可邮联。评价需要外网，这是枷锁，也是照妖镜。</span>
  </div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.33/fancybox/fancybox.umd.js" integrity="sha256-+2+qOqR8CKoHh/AsVR9k2qaDBKWjYNC2nozhYmv5j9k=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script>

  



  <script src="/js/third-party/fancybox.js"></script>



  




  <script src="https://cdnjs.cloudflare.com/ajax/libs/quicklink/2.3.0/quicklink.umd.js" integrity="sha256-yvJQOINiH9fWemHn0vCA5lsHWJaHs6/ZmO+1Ft04SvM=" crossorigin="anonymous"></script>
  <script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":true,"archive":true,"delay":true,"timeout":3000,"priority":true,"url":"https://www.yigegongjiang.com/2024/virtual_currency/"}</script>
  <script src="/js/third-party/quicklink.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"yigegongjiang","repo":"yigegongjiang_discuss","client_id":"65bebc0a049450012bda","client_secret":"06004e7143dc59f263a8d1bd1893dcf66d6bb7ee","admin_user":"yigegongjiang","distraction_free_mode":false,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":"en","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.min.js","integrity":"sha256-MVK9MGD/XJaGyIghSVrONSnoXoGh3IFxLw0zfvzpxR4="},"path_md5":"35077c0ca7ed6f67af461010c67bf498"}</script>
<script src="/js/third-party/comments/gitalk.js"></script>
<script class="next-config" data-name="utterances" type="application/json">{"enable":true,"repo":"yigegongjiang/yigegongjiang_discuss","issue_term":"title","theme":"photon-dark"}</script>
<script src="/js/third-party/comments/utterances.js"></script>

</body>
</html>
